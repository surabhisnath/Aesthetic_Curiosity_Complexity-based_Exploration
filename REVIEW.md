# Review 2023-12-20

## Notes

- **In terms of correctness, the code seems fine**
	- With the one reservation that the paper doesn't list all of the models you are running, so I am just assuming they are correct...
- Need to add `requirements.txt`, and ignore `__pycache__` dirs
	- This is what my pull request does
- Running the code creates a plot that is not in the git repo:
	- `scripts/grid-search/plots/uLSC:vLSC_survival_curve.pdf`
- The plots generated by `complexity-extended/MixedEffectsModelling.R` are not used in the paper, right?
 
- In my fork, I have made a bunch of changes, most of which are stylistic
	- I suggest you start using a linter with your code (especially the R code)
	- There are a bunch of stylistic norms which you code wasn't following...
	- Even if you make no changes to this code, I think it is a good idea to follow those norms in future code
- One thing that might be nice is for the R code to print out what it is doing as it goes
	- As in, what output it is generating

## Files
    
### `README.md`

- The repository information is pretty dense. In my version I have made a few changes to separate the `scripts` information out a bit, but it might be worth thinking about how to present the information in a more accessible way
- The `Running the code` section is a bit ... brief
	- It should say how/why to run the python notebook
	- It should say how/why to run the R code that you have
		- The command I used to install all the R libs I needed was:
```R
install.packages(c( "MASS", "afex", "car", "corrplot", "dplyr", "fitdistrplus", "ggplot2", "insight", "interactions", "jtools", "lattice", "lme4", "lmerTest", "mediation", "merTools", "modelr", "nlme", "sjPlot", "sjmisc", "survival", "survminer"))
```

### `complexity-extended/MixedEffectsModelling.R`

- There are a few stylistic things that you might fix:
	- Using `"` instead of `'`
	- Using `<-` instead of `=`
	- You have funny indenting of continuing lines
		- R has style rules, and it would be good to try to follow them
		- See *e.g.*, the block at 109 in my code vs. 107 in your code
 - Line ~66: check indenting of `%>%` lines
 - Why is the last line in a block by itself?
	 - It seems like it would fit into the previous block
- Line ~150 (the last big block):
	- You have lines that set `f1`, `f2`, `f3`, and `f`
	- `f` seems to be the same as `f1`
	- Is there a reason you use both?
 
### `complexity-extended/util/Util.R`

- Your formatting is a bit all over the place...

### `grid-search/MixedEffectsModelling.R`

 - Line ~73: check indenting of `%>%` lines
 - Line 126+: You have commented out code. I think you can delete it
 - Again, you might want to follow the standard R layout rules
 - I see that you are using a different optimiser for `lmer` here than in `complexity-extended`
	 - I don't know enough about the optimisers, but I guess you have a reason to do that?
- You have a variable named `coefficients`
	- That is fine, but be aware that is also another name for the `coef` function

### `grid-search/SurvivalAnalysis.R`

- This whole file is indented too many spaces
- When you building the correlation matrix, you end up using the same list of names a couple of times. 
	- Is it worth making them a variable instead?
- I think it is recommended to use `seq_len(nrow(X))` rather than `1:nrow(X)`
- In the `models` part, you have long strings. I don't think you should put comments on the end of those line
- You have the following lines repeated a few times. Can you just stick them in variables?
```R
    uLSC = mean(data$uLSC, na.rm = TRUE),
    vLSC = mean(data$vLSC, na.rm = TRUE),
    uInt = mean(data$uInt, na.rm = TRUE),
```

### `grid-search/util/Util.R`

- Your formatting is a bit all over the place...
- I think you should have `library(survival)` (or `survminer`) at the top of the file

### `grid-search/DescriptionAnalysis.ipynb`

- It is a bit unclear what this file is for. Can you write a more detailed blurb at the top, explaining what you would get if you ran the cells in this file
- The file also seems a bit ... unfinished/unstructured
	- Can you add more headings, or something?

- Lots of unused imports:
	- `json`, `datetime`, `statistics`, `math`, `re`, `matplotlib`, `pickle`, `itertools`, `tqdm`, `PIL`, `stats`
	 - `import seaborn as sns` is imported twice
- Correlations (pearsons *etc.*)
	- Can you put x/y labels on the graphs?
- `print(scipy.stats.spearmanr(- 9.18 * X + 11.11 * Y + 12.61 * X * Y - 9.65 * X * X - 0.71 * Y * Y, 4.9 * Z - 6.03 * W + 1.19 * Z * W - 1.21 * Z * Z + 0.32 * W * W))` (In cell 18?) gives an error
- What is the point of the `Visualize patterns` section?
